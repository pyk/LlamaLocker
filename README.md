# Llama Locker v0

Overview:

- `LlamaLocker` have one `Owner`
- `LlamaLocker` distribute the rewards on Weekly epochs
- `LlamaLocker` weekly epochs begin at Thursday 0:00 UTC

Owner:

- `Owner` can add new reward token via `addRewardToken(address)`
- `Owner` can topup weekly rewards via `addReward(tokenAddress, amount)` (vlCVX
  styles)

User:

- User can lock their llamas via `lock(tokenIds)`
- llamas will be locked for 4 weeks (plus X number of days until the next
  Thursday)
- User will be eligible to claim share of the rewards on the next epoch
- User can unlock their llamas via `unlock(tokenIds)`

## Lock Mechanism

- NFTs that are locked cannot be withdrawn for a duration of 4 epochs,
  equivalent to 4 weeks. During this period, they are eligible to receive a
  proportionate share of yields.
- The yield generated by a locked NFT can be directed to any designated address,
  as specified at the time of locking the NFT.
- Unlike the CVX Lock style, where tokens must be actively kicked out after
  their lock duration ends, LlamaLocker offers a more user-friendly approach.
- NFT owners have the option to withdraw their NFTs in the epoch after lock
  duration ends. If they choose not to withdraw, the NFTs will automatically
  re-lock for the subsequent lock duration.
- This automatic re-locking feature streamlines the process, eliminating the need
  for manual re-locking and thereby saving users on gas costs.

Example of Lock Mechanism:

1. Alice locks Llama #1 on January 28, 2024, at 22:49:42 GMT+0000.
2. Llama #1 starts accruing yields from February 1, 2024, at 00:00:00 GMT+0000
   (next epoch).
3. Withdrawal of Llama #1 is possible anytime from February 29, 2024, at
   00:00:00 GMT+0000 to March 7, 2024, at 00:00:00 GMT+0000, which corresponds
   to a one-week epoch.
4. If Llama #1 remains unwithdrawn during this window, it will automatically
   re-lock starting March 7, 2024, at 00:00:00 GMT+0000.

Feel free to share more text for improvement or specify particular areas of focus!

## Getting started

Make sure to use latest version of foundry:

```shell
foundryup
```

Install dependencies:

```shell
forge install
```

Run the tests:

```shell
forge test --rpc-url https://ethereum.publicnode.com
```
